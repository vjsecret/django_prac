<!doctype html>
<html lang="zh_TW">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <title>Hello, world!</title>
    <style>
		.row{
				flex-wrap: nowrap;
			}
    </style>
  </head>
  <body>
    <!--<h1>Hello, world!</h1>-->
    <div class="row">
        <div class="col-md-8 pull-left">
            <ul class="nav nav-tabs navbar-fixed-top">
              <li class="nav-item active">
                <a class="nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
              </li>

              <li class="nav-item" id="mana" style="display:none;">
                <a class="nav-link" href="mycrud">商品管理</a>
              </li> 
              <li class="nav-item">
                <a class="nav-link" href="car">購物車</a>
              </li>
              <li class="nav-item" id="btnLogout" style="display:none;">
                <a class="nav-link">會員登出</a>
              </li>
              <li> 
              <input type="Email" id="txtEmail" placeholder="Enter Email"><br>
			  <input type="password" id="txtPwd" placeholder="Enter Password"><br>
              </li>
              <li class="nav-item" id="btnLogin">
                <a class="nav-link">會員登入</a>
              </li>              
<!--			  <li class="nav-item" id="mana2">
                <a class="nav-link" href="mycrud">商品管理</a>
              </li>   -->              
            </ul>
 
        </div>
        <div class="col-md-4 pull-right">
<form class="form-inline my-lg-0" action="http://www.google.com/search" method="get">
          <input class="form-control" type="search" placeholder="Search" aria-label="Search" name="q">
          <button class="btn btn-outline-success my-sm-0" type="submit">Search</button>
        </form>
        </div>
    </div>

<div class="bd-example">
  <div id="mycarousel" class="carousel slide" data-ride="carousel">
  
    <ol class="carousel-indicators">
      <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
      <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
      <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
    </ol>


    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="..\static\images\coffee\coffee01.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
          <h5>First slide label</h5>
          <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
        </div>
      </div>

      <div class="carousel-item">
        <img src="..\static\images\coffee\coffee02.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
          <h5>First slide label</h5>
          <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
        </div>
      </div>

      <div class="carousel-item">
        <img src="..\static\images\coffee\coffee03.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
          <h5>First slide label</h5>
          <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
        </div>
      </div>

    </div>
    <a class="carousel-control-prev" href="#mycarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#mycarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>
<main>
    <div class="row">
        <div class="col-sm-4">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">遊戲列表</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mynav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
        <div class="col-md-4 collapse navbar-collapse" id="mynav">

            <ul class="nav nav-tabs">             
<li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Dropdown
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>             
            </ul>
        </div>
</nav>

</div>
        <div class="col-sm-8"><img src="..\static\images\coffee\coffee04.jpg" class="d-block w-100" alt="..."></div>
</main>

	<script src="https://www.gstatic.com/firebasejs/5.7.2/firebase.js"></script>
    <script>
      // Initialize Firebase
        var config = {
                apiKey: "AIzaSyBBpKMDQk2He3D3uPVrypr0namRTJes2pk",
                authDomain: "first20190109.firebaseapp.com",
                databaseURL: "https://first20190109.firebaseio.com",
                projectId: "first20190109",
                storageBucket: "first20190109.appspot.com",
                messagingSenderId: "1026634990833"
              };
              firebase.initializeApp(config);
		const txtEmail=document.getElementById('txtEmail');
		const txtPwd=document.getElementById('txtPwd');
		const btnLogin=document.getElementById('btnLogin');
        const liMana=document.getElementById('mana');
        const auth=firebase.auth();

		btnLogin.addEventListener('click',e=>{
								var email=txtEmail.value;
								var pwd=txtPwd.value;							
								var promise=auth.signInWithEmailAndPassword(email, pwd);
		
								promise.then(function(){
										alert("歡迎光臨!!");
										//authDemo.innerHTML="電子郵件:"+email+"<br>";
									});
								promise.catch(error=>{
											  if (error.code==="auth/invalid-email")
												alert("電子郵件格式不正確!!");
											else if (error.code==="auth/user-not-found")
												alert("無此使用者!!");
											else if (error.code==="auth/wrong-password")
												alert("密碼錯誤!!");
											else
												alert("登入失敗，可能被停權了，請主動與MIS人員聯絡!!");
												//authDemo.innerHTML="登入失敗訊息:"+error.message+"<br>";
									});
		
		});
		
		

        btnLogout.addEventListener('click',e=>{							
                auth.signOut();
                alert("881~~");
				txtEmail.value='';
				txtPwd.value='';
				//javascript:location.href='login2';
            });
        
        auth.onAuthStateChanged(firebaseUser=>{
                                  if(firebaseUser){
                    console.log(firebaseUser);
                    btnLogout.style.display="inline-block";
                    liMana.style.display="inline-block";
					txtEmail.style.display="none";
					txtPwd.style.display="none";
					btnLogin.style.display="none";
                    //liSignUp.style.display="none";                    
                    }else{
                    btnLogout.style.display="none";
                    liMana.style.display="none";
					txtEmail.style.display="inline-block";
					txtPwd.style.display="inline-block";
					btnLogin.style.display="inline-block";
                    //liSignUp.style.display="inline-block";
                }
        });
    </script>
  </body>
</html>